<html>
  <head>
    <title>Websocket test</title>
    <script>
      const client = new WebSocket('ws://localhost:3000');

      client.onmessage = (msg) => {
        console.log(msg);
        const realMessage = JSON.parse(msg.data);
        document.getElementById('box').innerHTML =
          '<ul><li>Free Mem: ' +
          realMessage.freemem +
          '</li><li>Load avg: ' +
          realMessage.loadavg +
          '</li></ul>';
        document.getElementById('raw').innerHTML = JSON.stringify(
          JSON.parse(msg.data)
        );
      };
      function sendMessage() {
        client.send('Hello websocket server');
      }
    </script>
  </head>
  <body>
    <div>Welcome to websockets</div>
    <div id="box" style="border: 1px dashed red; min-height: 14px"></div>
    <div id="raw" style="border: 1px dashed blue; min-height: 14px"></div>
    <button onclick="sendMessage()">Send message</button>
  </body>
</html>
